<div dir="rtl">
  
# گزارش فنی راه حل پذیرش یا رد اسامی حقوقی  

## مقدمه 
مسأله‌ی اصلی در این پروژه، طراحی و پیاده‌سازی یک راه حل هوشمند برای **پذیرش یا رد اسامی حقوقی پیشنهادی** است. هدف آن است که با توجه به مجموعه‌ای از اسامی ثبت‌شده، بتواند تشخیص دهد آیا نام پیشنهادی با قوانین مشخصی بر یکی از اسامی موجود منطبق است یا خیر. در صورت وجود تطابق، نام پیشنهادی رد می‌شود؛ در غیر این صورت، پذیرش خواهد شد.  

## تعریف ریاضی مسأله  
یک نام پیشنهادی **رد می‌شود اگر و فقط اگر** حداقل یک نام ثبت‌شده وجود داشته باشد که بین آن و نام پیشنهادی یکی از قوانین تعریف‌شده برقرار باشد. در غیر این صورت، نام پیشنهادی پذیرفته می‌شود.  

## قوانین تطابق اسامی (۱۲ قاعده)  
در این سامانه، ۱۲ قانون برای تشخیص شباهت یا تطابق اسامی تعریف شده است:  

| شماره | نام انگلیسی | شرح | مثال |
|-------|-------------|------|------|
| 0 | abbreviation_shortening | تغییر جزئی در املاء یا نوشتار | صنایع غذایی مهین → صنایع غذایی میهن |
| 1 | activity_change | تغییر حوزه فعالیت | صنایع غذایی میهن → صنایع لبنی میهن |
| 2 | adjective_removal | حذف صفت‌ها | صنایع غذایی میهن → صنایع میهن |
| 3 | domain_similarity | تغییر دامنه فعالیت مشابه | صنایع غذایی میهن → صنایع خوراکی میهن |
| 4 | generic_word | افزودن کلمات عمومی مثل "شرکت" | صنایع غذایی میهن → شرکت صنایع غذایی میهن |
| 5 | minor_spelling_variations | استفاده از مخفف یا کوتاه‌سازی | فناوری برتر تهران → فن برتر تهران |
| 6 | morphological_variation | تغییرات صرفی/واژگانی | صنایع غذایی میهن → صنایع غذای میهن |
| 7 | no_rule | نمونه‌های مثبت بدون قاعده خاص | صنایع غذایی میهن → صنایع دارویی میهن |
| 8 | prefix_suffix | افزودن پسوند/پیشوند | صنایع غذایی میهن → صنایع غذایی میهن نوین |
| 9 | singular_plural | تغییر مفرد/جمع | صنایع غذایی میهن → صنعت غذایی میهن |
| 10 | synonym | جایگزینی مترادف‌ها | صنایع غذایی میهن → صنایع خوراکی میهن |
| 11 | word_order | تغییر ترتیب کلمات | صنایع غذایی میهن → میهن صنایع غذایی |
| 12 | word_removal | حذف یک کلمه | صنایع غذایی میهن → غذایی میهن |

## چالش مقیاس‌پذیری  
با توجه به وجود بیش از **دو میلیون نام ثبت‌شده**، مقایسه‌ی مستقیم هر نام پیشنهادی با تمامی اسامی ثبت‌شده کارایی ندارد. راه‌حل ارائه‌شده استفاده از **مدل‌های رتبه‌بندی و بازرتبه‌بندی (Retrieve & Rerank)** است تا تنها اسامی مشابه بررسی شوند.  

## مدل Bi-Encoder برای رتبه‌بندی اولیه  
- **هدف:** انتخاب ۱۰۰ نام ثبت‌شده‌ی بسیار مشابه با نام پیشنهادی.  
- **روش:**  
  - هر نام به بردار ویژگی تبدیل می‌شود.  
  - شباهت بین دو نام با **زاویه کسینوس** بین بردارها محاسبه می‌شود.  
- **مدل پایه:** `tooka-sbert-large-v2`  
- **داده‌های آموزش:**  
  - حدود ۳۴۰ سه‌تایی شامل:  
    - Anchor (نام اصلی)  
    - Positive (نمونه مشابه معنایی)  
    - Hard Negative (نمونه ظاهراً مشابه ولی غیرمرتبط معنایی)  
  - دیتاست توسط مدل GPT-40 تولید شده و در [HuggingFace](https://huggingface.co/datasets/IRI2070/legal-names-bi-encoder-dataset) منتشر شده است.  
- **کد تولید دیتاست:** [GitHub](https://github.com/IRI2070/hamrah-academy-genai-bootcamp-exercises/tree/main/course-5-nlp-with-deep-learning/legal-entity-name-validation)  
- **مدل آموزش‌دیده:** [HuggingFace](https://huggingface.co/IRI2070/tooka-sbert-large-v2-legal-names-bi-encoder)  

## مدل Cross-Encoder برای تطابق قوانین  
- **هدف:** بررسی دقیق تطابق نام پیشنهادی با نام ثبت‌شده بر اساس یکی از قوانین ۱۲گانه.  
- **مدل پایه:** `tooka-bert-large`  
- **داده‌های آموزش:**  
  - سه‌تایی شامل:  
    - نام پیشنهادی  
    - نام ثبت‌شده  
    - برچسب قانون (یکی از ۱۲ قانون یا NO_RULE)  
  - دیتاست در [HuggingFace](https://huggingface.co/datasets/IRI2070/legal-names-cross-encoder-dataset) منتشر شده است.  
- **مدل آموزش‌دیده:** [HuggingFace](https://huggingface.co/IRI2070/legal-names-validation-rules-classifier)  

## ترکیب دو مدل: سامانه Retrieve & Rerank  
1. **مرحله اول (Retrieve):**  
    - مدل Bi-Encoder، تعداد ۱۰۰ نام مشابه از میان دو میلیون نام ثبت‌شده انتخاب می‌کند.   
2. **مرحله دوم (Rerank):**  
   - مدل Cross-Encoder، این ۱۰۰ نام را بررسی می‌کند.  
   - اگر حداقل یک نام با نام پیشنهادی بر اساس یکی از قوانین تطابق بالای ۷۵٪ داشته باشد، نام پیشنهادی رد می‌شود.  
   - در غیر این صورت، نام پیشنهادی پذیرفته خواهد شد.  

## دسترسی به کدها و منابع  
- **دیتاست Bi-Encoder:** [HuggingFace Dataset](https://huggingface.co/datasets/IRI2070/legal-names-bi-encoder-dataset)  
- **مدل Bi-Encoder:** [HuggingFace Model](https://huggingface.co/IRI2070/tooka-sbert-large-v2-legal-names-bi-encoder)  
- **دیتاست Cross-Encoder:** [HuggingFace Dataset](https://huggingface.co/datasets/IRI2070/legal-names-cross-encoder-dataset)  
- **مدل Cross-Encoder:** [HuggingFace Model](https://huggingface.co/IRI2070/legal-names-validation-rules-classifier)  
- **کدهای کامل پروژه:** [GitHub Repository](https://github.com/IRI2070/hamrah-academy-genai-bootcamp-exercises/tree/main/course-5-nlp-with-deep-learning/legal-entity-name-validation)  

## جمع‌بندی  
این راه حل با ترکیب دو مدل **Bi-Encoder** و **Cross-Encoder** توانسته است راه‌حلی کارآمد و مقیاس‌پذیر برای مسأله‌ی پذیرش یا رد اسامی حقوقی ارائه دهد. استفاده از مدل‌های اختصاصی آموزش‌دیده بر روی داده‌های واقعی دامنه‌ی اسامی شرکت‌ها، دقت بالاتری نسبت به مدل‌های عمومی ایجاد کرده و امکان پیاده‌سازی یک سیستم عملیاتی برای سازمان‌های ثبت شرکت‌ها را فراهم ساخته است.  
</div>
